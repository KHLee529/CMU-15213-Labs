# Attack Lab

## ctarget

當進入 `getbuf` 函式時

```
$rsp = 0x556dca0
($rsp) = 0x00401976 // return address
```

宣告區域變數後

```
$rsp = 0x5561dc78
```

stack 內容如下

```
0x5561dc78:     0x10    0x83    0x06    0x00    0x00    0x00    0x00    0x00
0x5561dc80:     0xf4    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc88:     0xc0    0xdc    0x61    0x55    0x00    0x00    0x00    0x00
0x5561dc90:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dc98:     0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x5561dca0:     0x76    0x19    0x40    0x00    0x00    0x00    0x00    0x00
```

可以看到宣告分配給字串的位置大約 16 byte [0x5561dc78: 0x5561dc88]
字串超過16字元時即會產生 overflow 



## Return-Oriented Programming



|%rax|48 89 c0|48 89 c1|48 89 c2|48 89 c3|48 89 c4|48 89 c5|48 89 c6|48 89 c7|
|%rcx|48 89 c8|48 89 c9|48 89 ca|48 89 cb|48 89 cc|48 89 cd|48 89 ce|48 89 cf|
|%rdx|48 89 d0|48 89 d1|48 89 d2|48 89 d3|48 89 d4|48 89 d5|48 89 d6|48 89 d7|
|%rbx|48 89 d8|48 89 d9|48 89 da|48 89 db|48 89 dc|48 89 dd|48 89 de|48 89 df|
|%rsp|48 89 e0|48 89 e1|48 89 e2|48 89 e3|48 89 e4|48 89 e5|48 89 e6|48 89 e7|
|%rbp|48 89 e8|48 89 e9|48 89 ea|48 89 eb|48 89 ec|48 89 ed|48 89 ee|48 89 ef|
|%rsi|48 89 f0|48 89 f1|48 89 f2|48 89 f3|48 89 f4|48 89 f5|48 89 f6|48 89 f7|
|%rdi|48 89 f8|48 89 f9|48 89 fa|48 89 fb|48 89 fc|48 89 fd|48 89 fe|48 89 ff|
